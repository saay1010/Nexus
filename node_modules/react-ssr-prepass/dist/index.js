"use strict";var e=require("preact"),t=require("preact/compat");function r(e,t){for(let r in t)e[r]=t[r];return e}function o(e,t){return Array.isArray(t)?t.reduce(o,e):null!=t&&!1!==t&&e.push(t),e}module.exports=function n(s,p,i){if(null==s||"object"!=typeof s)return Promise.resolve();let _=s.type,l=s.props,c=[];if(i=i||{},"function"==typeof _&&_!==e.Fragment&&_!==t.Suspense){let t,o=s.__c=new e.Component(l,i);o.__d=!0,o.__v=s,void 0===o.state&&(o.state={});let c=!1,a=_.contextType,u=a&&i[a.__c],m=null!=a?u?u.props.value:a.__p||a.__:i;return _.prototype&&"function"==typeof _.prototype.render?(c=!0,o=s.__c=new _(l,m),o.__d=!0,o.__v=s,o.props=l,o.context=m,void 0===o.state&&(o.state={}),_.getDerivedStateFromProps?o.state=r(r({},o.state),_.getDerivedStateFromProps(o.props,o.state)):o.componentWillMount&&o.componentWillMount(),t=()=>{try{return e.options.render&&e.options.render(s),e.options.__r&&e.options.__r(s),Promise.resolve(o.render(o.props,o.state,o.context))}catch(e){return e&&e.then?e.then(t,t):Promise.reject(e)}}):t=()=>{try{const t=e.options.__s;e.options.__s=!0,e.options.render&&e.options.render(s),e.options.__r&&e.options.__r(s);const r=Promise.resolve(_.call(s.__c,l,m));return e.options.__s=t,r}catch(e){return e&&e.then?e.then(t,t):Promise.reject(e)}},(p?(p(s,c?o:void 0)||Promise.resolve()).then(t):t()).then(e=>(o.getChildContext&&(i=r(r({},i),o.getChildContext())),Array.isArray(e)?Promise.all(e.map(e=>n(e,p,i))):n(e,p,i)))}return l&&o(c=[],l.children).length?Promise.all(c.map(e=>n(e,p,i))):Promise.resolve()};
//# sourceMappingURL=index.js.map
